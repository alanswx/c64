/*-------------------------------------------------------------------------------*\||	File:	RasterDNormalTextwSprMode8bit.c||	Description:||||||	Copyright ©	1994, 1995, Alan Steremberg and Ed Wynne|\*-------------------------------------------------------------------------------*/#include	"ColorDrawing.h"#include "Drawing.h"#include	"DrawingGlobals.h"#include	"VICSprites.h"extern	short			gSpriteOnRaster[256];extern	double			**gDoubleColorTable;void	RasterLine_DNormalText_Sprite_40Char(short	rl){register	double						*dstImagePosition;register	double						*lstImagePosition;			unsigned	char				*sprImagePosition;register	unsigned	char				*curColorLine;register	unsigned char				*screenData;register	unsigned char				*VideoCharacterByte;{register	unsigned	long				rasterline=rl;register	unsigned	long				rasterbasedoffset=gRasterBasedOffset[rasterline];VideoCharacterByte=gVideoCharacterBase+(rasterline&0x07); //same as (rasterline %8)curColorLine=gVideoColorBase+rasterbasedoffset;screenData=gVideoScreenRamBase+rasterbasedoffset;lstImagePosition=(double *)gTheActiveBitsArray[(rasterline<<1)+1];dstImagePosition=(double *)gTheActiveBitsArray[rasterline<<1];sprImagePosition=(unsigned	char	*)dstImagePosition;}	{				unsigned long				i;	register double						four_pixels;	register	double						*MyTable;	register	unsigned long				curSingleCharMap;	register	double						**cachenormaltable=gDoubleColorTable;	for (i=0;i<10;i++)		{		MyTable=(double *)cachenormaltable[(*curColorLine++)&0x0F];		curSingleCharMap=*(VideoCharacterByte+((*(screenData++))<<3));		four_pixels=MyTable[(curSingleCharMap) >> 4];		*(lstImagePosition++)=*(dstImagePosition++)=four_pixels;						four_pixels=MyTable[(curSingleCharMap&0x0F)];		*(lstImagePosition++)=*(dstImagePosition++)=four_pixels;		MyTable=(double *)cachenormaltable[(*curColorLine++)&0x0F];		curSingleCharMap=*(VideoCharacterByte+((*(screenData++))<<3));		four_pixels=MyTable[(curSingleCharMap) >> 4];		*(lstImagePosition++)=*(dstImagePosition++)=four_pixels;				four_pixels=MyTable[(curSingleCharMap&0x0F)];		*(lstImagePosition++)=*(dstImagePosition++)=four_pixels;		MyTable=(double *)cachenormaltable[(*curColorLine++)&0x0F];		curSingleCharMap=*(VideoCharacterByte+((*(screenData++))<<3));		four_pixels=MyTable[(curSingleCharMap) >> 4];		*(lstImagePosition++)=*(dstImagePosition++)=four_pixels;		four_pixels=MyTable[(curSingleCharMap&0x0F)];		*(lstImagePosition++)=*(dstImagePosition++)=four_pixels;		MyTable=(double *)cachenormaltable[(*curColorLine++)&0x0F];		curSingleCharMap=*(VideoCharacterByte+((*(screenData++))<<3));		four_pixels=MyTable[(curSingleCharMap) >> 4];		*(lstImagePosition++)=*(dstImagePosition++)=four_pixels;		four_pixels=MyTable[(curSingleCharMap&0x0F)];		*(lstImagePosition++)=*(dstImagePosition++)=four_pixels;			}if (gSpriteOnRaster[rl+50])	SpriteDrawOneDRaster(rl+50,sprImagePosition);	}		////	draw border here//}