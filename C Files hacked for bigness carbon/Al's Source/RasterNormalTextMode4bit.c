/*-------------------------------------------------------------------------------*\||	File:	RasterNormalTextMode4bit.c||	Description:||||||	Copyright ©	1994, Alan Steremberg and Ed Wynne|\*-------------------------------------------------------------------------------*/#include "debugwindow.h"#include	"ColorDrawing.h"#include "drawing.h"#include	"DrawingGlobals.h"void	RasterLine_NormalText_40Char4Bit(short	rasterline){register	unsigned long				i;register	unsigned long				*dstImagePosition;register	unsigned	char				*curColorLine;			unsigned char				*VideoCharacterByte=gVideoCharacterBase+(rasterline&0x07); //same as (rasterline %8)			unsigned	long				rasterbasedoffset=gRasterBasedOffset[rasterline];register	unsigned char				*screenData;register	unsigned	long				*cachethefourbittable;register	unsigned	long				*cachenormaltable;curColorLine=gVideoColorBase+rasterbasedoffset;screenData=gVideoScreenRamBase+rasterbasedoffset;dstImagePosition=(unsigned long *)gTheActiveBitsArray[rasterline];return;////	draw border here//////	draw characters//////	95////	we cache our table in a register. Why? It is faster!//cachethefourbittable=fourBitTable;cachenormaltable=Normal_FourBitColorTable;for (i=0;i<40;i++)	{	register unsigned	long	eight_pixels;	register	unsigned	long	forecolor;	unsigned long				curSingleCharMap;		curSingleCharMap=*(VideoCharacterByte+((*(screenData++))<<3));#if	1	eight_pixels=cachenormaltable[curSingleCharMap];		forecolor=cachethefourbittable[*(curColorLine++)];	forecolor=(forecolor&eight_pixels);	*(dstImagePosition++)=forecolor;#else	*(dstImagePosition++)=cachenormaltable[curSingleCharMap]&cachethefourbittable[*(curColorLine++)];#endif	}	////	draw border here//}