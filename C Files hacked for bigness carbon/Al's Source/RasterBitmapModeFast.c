/*-------------------------------------------------------------------------------*\||	File:	RasterBitmapModeFast.c||	Description:||||||	Copyright ï¿½	1994, Alan Steremberg and Ed Wynne|\*-------------------------------------------------------------------------------*/#include	"ColorDrawing.h"#include "Drawing.h"#include	"DrawingGlobals.h"#include	"VICSprites.h"extern	short			gSpriteOnRaster[256];void	RasterLine_Bitmap_40Char(short	rl){register	UInt32				*dstImagePosition;			unsigned	char				*sprImagePosition;register	unsigned	char				*curColorLine;register	unsigned char				*screenData;register	unsigned char				*VideoCharacterByte;{register	UInt32				rasterline=rl;register	UInt32				rasterbasedoffset=gRasterBasedOffset[rasterline];        fprintf(stderr,"RasterLine_Bitmap_40Char %d\n",rasterline);    VideoCharacterByte=gVideoCharacterBase+(rasterbasedoffset<<3) + (rasterline&0x07);curColorLine=gVideoColorBase+rasterbasedoffset;screenData=gVideoScreenRamBase+rasterbasedoffset;dstImagePosition=(UInt32 *)gTheActiveBitsArray[rasterline];sprImagePosition=(unsigned	char	*)dstImagePosition;}	{				UInt32				i;	register	UInt32				*MyTable;	register	UInt32				curSingleCharMap;	register	unsigned	char				colors;	for (i=0;i<40;i++)		{		colors=*(screenData++);		MyTable=(UInt32 *)ColorTables[(colors&0x0F)][(colors>>4)];		curSingleCharMap=*VideoCharacterByte;		VideoCharacterByte+=8;				*(dstImagePosition++)=ntohl(MyTable[((curSingleCharMap) >> 4 )& 0x0F]);		*(dstImagePosition++)=ntohl(MyTable[(curSingleCharMap&0x0F)]);            		}	}		if (gSpriteOnRaster[rl+50])	//there is at least one sprite on this line	SpriteDrawOneRaster(rl+50,sprImagePosition);	////	draw border here//}