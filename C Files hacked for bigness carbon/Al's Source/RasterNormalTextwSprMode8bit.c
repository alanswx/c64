/*-------------------------------------------------------------------------------*\||	File:	RasterNormalTextwSprMode8bit.c||	Description:||||||	Copyright ï¿½	1994, Alan Steremberg and Ed Wynne|\*-------------------------------------------------------------------------------*/#include	"ColorDrawing.h"#include "Drawing.h"#include	"DrawingGlobals.h"#include	"VICSprites.h"extern	short			gSpriteOnRaster[256];#if 0void	RasterLine_NormalText_Sprite_40Char(short	rl){register	unsigned long				*dstImagePosition;			unsigned	char				*sprImagePosition;register	unsigned	char				*curColorLine;register	unsigned char				*screenData;register	unsigned char				*VideoCharacterByte;{register	unsigned	long				rasterline=rl;register	unsigned	long				rasterbasedoffset=gRasterBasedOffset[rasterline];VideoCharacterByte=gVideoCharacterBase+(rasterline&0x07); //same as (rasterline %8)curColorLine=gVideoColorBase+rasterbasedoffset;screenData=gVideoScreenRamBase+rasterbasedoffset;dstImagePosition=(unsigned long *)gTheActiveBitsArray[rasterline];sprImagePosition=(unsigned	char	*)dstImagePosition;}	{				unsigned long				i;	register unsigned	long				four_pixels;	register	unsigned long				*MyTable;	register	unsigned long				curSingleCharMap;	register	unsigned	long				**cachenormaltable=gNastyColorTable;	for (i=0;i<10;i++)		{		MyTable=(unsigned long *)cachenormaltable[(*curColorLine++)&0x0F];		curSingleCharMap=*(VideoCharacterByte+((*(screenData++))<<3));		four_pixels=MyTable[(curSingleCharMap) >> 4];		*(dstImagePosition++)=four_pixels;		four_pixels=MyTable[(curSingleCharMap&0x0F)];		*(dstImagePosition++)=four_pixels;		MyTable=(unsigned long *)cachenormaltable[(*curColorLine++)&0x0F];		curSingleCharMap=*(VideoCharacterByte+((*(screenData++))<<3));		four_pixels=MyTable[(curSingleCharMap) >> 4];		*(dstImagePosition++)=four_pixels;		four_pixels=MyTable[(curSingleCharMap&0x0F)];		*(dstImagePosition++)=four_pixels;		MyTable=(unsigned long *)cachenormaltable[(*curColorLine++)&0x0F];		curSingleCharMap=*(VideoCharacterByte+((*(screenData++))<<3));		four_pixels=MyTable[(curSingleCharMap) >> 4];		*(dstImagePosition++)=four_pixels;		four_pixels=MyTable[(curSingleCharMap&0x0F)];		*(dstImagePosition++)=four_pixels;		MyTable=(unsigned long *)cachenormaltable[(*curColorLine++)&0x0F];		curSingleCharMap=*(VideoCharacterByte+((*(screenData++))<<3));		four_pixels=MyTable[(curSingleCharMap) >> 4];		*(dstImagePosition++)=four_pixels;		four_pixels=MyTable[(curSingleCharMap&0x0F)];		*(dstImagePosition++)=four_pixels;			}if (gSpriteOnRaster[rl+50])	SpriteDrawOneRaster(rl+50,sprImagePosition);	}		////	draw border here//}#endifvoid	RasterLine_NormalText_Sprite_40Char(short	rl){    fprintf(stderr,"RasterLine_NormalText_Sprite_40Char %d\n",rl);    register	UInt32				*dstImagePosition;    unsigned	char				*sprImagePosition;    register	unsigned	char				*curColorLine;    register	unsigned char				*screenData;    register	unsigned char				*VideoCharacterByte;        {        register	UInt32				rasterline=rl;        register	UInt32				rasterbasedoffset=gRasterBasedOffset[rasterline];                VideoCharacterByte=gVideoCharacterBase+(rasterline&0x07); //same as (rasterline %8)                curColorLine=gVideoColorBase+rasterbasedoffset;        screenData=gVideoScreenRamBase+rasterbasedoffset;        dstImagePosition=(UInt32 *)gTheActiveBitsArray[rasterline];        sprImagePosition=(unsigned	char	*)dstImagePosition;    }    {        UInt32				i;        register UInt32				four_pixels;        register	UInt32				*MyTable;        register	UInt32				curSingleCharMap;        register	UInt32				**cachenormaltable=gNastyColorTable;                        for (i=0;i<10;i++)        {                        MyTable=(UInt32 *)cachenormaltable[(*curColorLine++)&0x0F];                        curSingleCharMap=*(VideoCharacterByte+((*(screenData++))<<3));                        four_pixels=MyTable[(curSingleCharMap) >> 4];            *(dstImagePosition++)=four_pixels;            four_pixels=MyTable[(curSingleCharMap&0x0F)];            *(dstImagePosition++)=four_pixels;                        MyTable=(UInt32 *)cachenormaltable[(*curColorLine++)&0x0F];            curSingleCharMap=*(VideoCharacterByte+((*(screenData++))<<3));            four_pixels=MyTable[(curSingleCharMap) >> 4];            *(dstImagePosition++)=four_pixels;            four_pixels=MyTable[(curSingleCharMap&0x0F)];            *(dstImagePosition++)=four_pixels;                        MyTable=(UInt32 *)cachenormaltable[(*curColorLine++)&0x0F];            curSingleCharMap=*(VideoCharacterByte+((*(screenData++))<<3));            four_pixels=MyTable[(curSingleCharMap) >> 4];            *(dstImagePosition++)=four_pixels;            four_pixels=MyTable[(curSingleCharMap&0x0F)];            *(dstImagePosition++)=four_pixels;                        MyTable=(UInt32 *)cachenormaltable[(*curColorLine++)&0x0F];            curSingleCharMap=*(VideoCharacterByte+((*(screenData++))<<3));            four_pixels=MyTable[(curSingleCharMap) >> 4];            *(dstImagePosition++)=four_pixels;            four_pixels=MyTable[(curSingleCharMap&0x0F)];            *(dstImagePosition++)=four_pixels;                    }                        if (gSpriteOnRaster[rl+50])            SpriteDrawOneRaster(rl+50,sprImagePosition);                    }		    //    //	draw border here    //}