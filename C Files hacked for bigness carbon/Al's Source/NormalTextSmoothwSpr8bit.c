/*-------------------------------------------------------------------------------*\||	File:	NormalTextSmoothwSpr8bit.c||	Description:||||||	Copyright ©	1994, Alan Steremberg and Ed Wynne|\*-------------------------------------------------------------------------------*/#include	"ColorDrawing.h"#include "Drawing.h"#include	"DrawingGlobals.h"#include "debugwindow.h"#include	"VICSprites.h"extern	short				gSpriteOnRaster[256];extern	unsigned	char	gHorizScroll;extern	unsigned	char	gVerticalScroll;extern	unsigned	char	gVICReg[];void	RasterLine_NormalText_Sprite_38Char(short	rl){register	unsigned long				*dstImagePosition;			unsigned	char				*cfuckingsucks;			unsigned	long				*borders;register	unsigned	char				*curColorLine;register	unsigned char				*screenData;register	unsigned char				*VideoCharacterByte;register		long				rasterline=rl;if (gVICReg[0x11]&0x08)	{	}else	{//	if (rasterline<8 && gVerticalScroll==0)//			{//			RasterLine_Border_8Bit(rasterline);//			return;//			}//		else if (gVerticalScroll==1 && rasterline > 200-8)//			{//			RasterLine_Border_8Bit(rasterline);//			return;//			}		if (rasterline < 8)			{			RasterLine_Border_8Bit(rasterline+gVerticalScroll);			if (gSpriteOnRaster[rl+50])				SpriteDrawOneRaster(rl+50,gTheActiveBitsArray[rl]);			return;			}//		if (rasterline < 8 && rasterline > 0)//			{//			return;//			}//		if (rasterline<8 && rasterline > 0)//			{//			RasterLine_Border_8Bit(rasterline);//			return;//			}//		else if (rasterline < 0)//			return;	}		rasterline-=(gVerticalScroll)-3;		if (rasterline < 0)					{if (gSpriteOnRaster[rl+50])	SpriteDrawOneRaster(rl+50,gTheActiveBitsArray[rl]);						return;			}	if (rasterline > 199)	{if (gSpriteOnRaster[rl+50])	SpriteDrawOneRaster(rl+50,gTheActiveBitsArray[rl]);//	DebugStr("\pwe are fucked > 200");	return;	}{register	unsigned	long				rasterbasedoffset=gRasterBasedOffset[rasterline];VideoCharacterByte=gVideoCharacterBase+(rasterline&0x07); //same as (rasterline %8)curColorLine=gVideoColorBase+rasterbasedoffset;screenData=gVideoScreenRamBase+rasterbasedoffset;	//if (gVICReg[0x11]&0x08)//	{	borders=dstImagePosition=(unsigned long *)gTheActiveBitsArray[rasterline];	cfuckingsucks=(unsigned char *)dstImagePosition;//	}//else//	{//	borders=dstImagePosition=(unsigned long *)gTheActiveBitsArray[rasterline+gVerticalScrol];//	cfuckingsucks=(unsigned char *)dstImagePosition;//	}cfuckingsucks-=(8-gHorizScroll)+8;//cfuckingsucks-=(8-gHorizScroll);dstImagePosition=(unsigned long *)cfuckingsucks;dstImagePosition+=4;}	{				unsigned long				i;	register unsigned	long				four_pixels;	register	unsigned long				*MyTable;	register	unsigned long				curSingleCharMap;	register	unsigned	long				**cachenormaltable=gNastyColorTable;////	special case the first few rows...//if (gVICReg[0x16]&0x08){}else{}	for (i=0;i<9;i++)		{		MyTable=(unsigned long *)cachenormaltable[(*curColorLine++)&0x0F];		curSingleCharMap=*(VideoCharacterByte+((*(screenData++))<<3));		four_pixels=MyTable[(curSingleCharMap) >> 4];		*(dstImagePosition++)=four_pixels;		four_pixels=MyTable[(curSingleCharMap&0x0F)];		*(dstImagePosition++)=four_pixels;		MyTable=(unsigned long *)cachenormaltable[(*curColorLine++)&0x0F];		curSingleCharMap=*(VideoCharacterByte+((*(screenData++))<<3));		four_pixels=MyTable[(curSingleCharMap) >> 4];		*(dstImagePosition++)=four_pixels;		four_pixels=MyTable[(curSingleCharMap&0x0F)];		*(dstImagePosition++)=four_pixels;		MyTable=(unsigned long *)cachenormaltable[(*curColorLine++)&0x0F];		curSingleCharMap=*(VideoCharacterByte+((*(screenData++))<<3));		four_pixels=MyTable[(curSingleCharMap) >> 4];		*(dstImagePosition++)=four_pixels;		four_pixels=MyTable[(curSingleCharMap&0x0F)];		*(dstImagePosition++)=four_pixels;		MyTable=(unsigned long *)cachenormaltable[(*curColorLine++)&0x0F];		curSingleCharMap=*(VideoCharacterByte+((*(screenData++))<<3));		four_pixels=MyTable[(curSingleCharMap) >> 4];		*(dstImagePosition++)=four_pixels;		four_pixels=MyTable[(curSingleCharMap&0x0F)];		*(dstImagePosition++)=four_pixels;			}		MyTable=(unsigned long *)cachenormaltable[(*curColorLine++)&0x0F];		curSingleCharMap=*(VideoCharacterByte+((*(screenData++))<<3));		four_pixels=MyTable[(curSingleCharMap) >> 4];		*(dstImagePosition++)=four_pixels;		four_pixels=MyTable[(curSingleCharMap&0x0F)];		*(dstImagePosition++)=four_pixels;		MyTable=(unsigned long *)cachenormaltable[(*curColorLine++)&0x0F];		curSingleCharMap=*(VideoCharacterByte+((*(screenData++))<<3));		four_pixels=MyTable[(curSingleCharMap) >> 4];		*(dstImagePosition++)=four_pixels;		four_pixels=MyTable[(curSingleCharMap&0x0F)];		*(dstImagePosition++)=four_pixels;	if (gVICReg[0x16]&0x08){		MyTable=(unsigned long *)cachenormaltable[(*curColorLine++)&0x0F];		curSingleCharMap=*(VideoCharacterByte+((*(screenData++))<<3));		four_pixels=MyTable[(curSingleCharMap) >> 4];		*(dstImagePosition++)=four_pixels;		four_pixels=MyTable[(curSingleCharMap&0x0F)];		*(dstImagePosition++)=four_pixels;		MyTable=(unsigned long *)cachenormaltable[(*curColorLine++)&0x0F];		curSingleCharMap=*(VideoCharacterByte+((*(screenData++))<<3));		four_pixels=MyTable[(curSingleCharMap) >> 4];		*(dstImagePosition++)=four_pixels;		four_pixels=MyTable[(curSingleCharMap&0x0F)];		*(dstImagePosition++)=four_pixels;if (gSpriteOnRaster[rl+50])	SpriteDrawOneRaster(rl+50,gTheActiveBitsArray[rl]);}else{//horiz*(borders++)=gBorderColor;*(borders++)=gBorderColor;borders+=38*2;*(borders++)=gBorderColor;*(borders++)=gBorderColor;if (gSpriteOnRaster[rl+50])	SpriteDrawOneRaster(rl+50,gTheActiveBitsArray[rl]);}////	special case the last few rows...//	}		////	draw border here//}